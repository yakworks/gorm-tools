
buildscript {
  repositories {
    mavenLocal()
    maven { url "https://plugins.gradle.org/m2/" }
    maven { url "https://repo.grails.org/grails/core" }
  }
  dependencies {
    classpath "org.grails:grails-gradle-plugin:$grailsVersion"
    classpath "org.grails.plugins:hibernate5:$vGormHibernate"
    classpath "org.grails.plugins:views-gradle:$vViews"
  }
}

// apply plugin:'yakworks.grails-web'
// apply plugin:"war"
// apply plugin:'yakworks.grails-web'
apply plugin:"groovy"
//apply plugin:"war"
apply plugin:"org.grails.grails-web"
apply plugin:"org.grails.plugins.views-json"


dependencies {
  // compile "org.springframework.boot:spring-boot-starter-logging"
  // compile "org.springframework.boot:spring-boot-autoconfigure"
  // compile "org.grails:grails-core"
  // compile "org.springframework.boot:spring-boot-starter-actuator"
  implementation "org.springframework.boot:spring-boot-starter-tomcat"
  implementation "org.grails:grails-plugin-url-mappings"
  implementation "org.grails:grails-plugin-rest"
  implementation "org.grails:grails-plugin-codecs"
  implementation "org.grails:grails-plugin-interceptors"
  implementation "org.grails:grails-plugin-services"
  implementation "org.grails:grails-plugin-datasource"
  implementation "org.grails:grails-plugin-databinding"
  implementation "org.grails:grails-web-boot"

  implementation "org.grails:grails-logging"
  implementation "org.grails.plugins:cache"
  implementation "org.grails.plugins:events"
  implementation "org.grails.plugins:async"

  implementation "dk.glasius:external-config:$vExternalConfig"

  implementation "org.grails.plugins:hibernate5"
  implementation "org.hibernate:hibernate-core:$vHibernate"
  implementation "org.hibernate:hibernate-ehcache:$vHibernate"

  implementation "org.grails.plugins:views-json:$vViews"
  implementation "org.grails.plugins:views-json-templates:$vViews"

  console "org.grails:grails-console"
  profile "org.grails.profiles:rest-api"

  implementation project(":gorm-tools")
  implementation project(":gorm-tools-security")
  implementation project(":gorm-tools-rest")
  implementation project(":rally-domain")
  // compile project(":testify")

  // compile 'org.grails.plugins:csv:1.0'
  implementation 'net.sf.opencsv:opencsv:2.3'
  implementation "org.codehaus.gpars:gpars:$vGpars"

  // compile "org.grails.plugins:spring-security-rest:$vSpringSecurityRest"
  // compile "org.grails.plugins:spring-security-rest-grailscache:$vSpringSecurityRest"
  // compile "org.grails.plugins:spring-security-rest-gorm:$vSpringSecurityRest"
  // runtime "com.h2database:h2"
  // runtime "com.zaxxer:HikariCP:3.4.5"

  // runtime "org.glassfish.web:el-impl:2.1.2-b03"
  runtimeOnly "com.h2database:h2"
  runtimeOnly "javax.xml.bind:jaxb-api:2.3.1"
  runtimeOnly "com.zaxxer:HikariCP:$vHikari"

  // testCompile "io.micronaut:micronaut-http-client"
  //for rest api testing
  testImplementation "com.squareup.okhttp3:okhttp:$vOkhttp"
  //okhttp3 needs this
  testImplementation "org.jetbrains.kotlin:kotlin-stdlib:$vKotlin"
}

// bootRun {
//   //  ignoreExitValue true
//   jvmArgs('-Dspring.output.ansi.enabled=always', '-noverify', '-XX:TieredStopAtLevel=1', '-Xmx1024m')
//   sourceResources sourceSets.main
//   String springProfilesActive = 'spring.profiles.active'
//   systemProperty springProfilesActive, System.getProperty(springProfilesActive)
// }
//
// bootJar.enabled = true
// bootJar.archiveFileName = 'benchmarks.jar'
