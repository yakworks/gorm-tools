plugins {
  id "com.energizedwork.webdriver-binaries" version "1.4"
}
version "1.0"
group "yakworks"

apply plugin:"groovy"
apply plugin:"war"
apply plugin:"org.grails.grails-web"
apply plugin:"org.grails.grails-gsp"

dependencies {
  profile "org.grails.profiles:web"
  compile "org.springframework.boot:spring-boot-starter-actuator"
  provided "org.springframework.boot:spring-boot-starter-tomcat"
  console "org.grails:grails-console"

  compile project(':gorm-tools')

  //FIXME why is this needed? it doesn't flow from deps in the plugin,testing.JdbcTimeZoneSpec.$tt__$spock_feature_0_0(JdbcTimeZoneSpec.groovy:55) fails
  compile "org.hibernate:hibernate-core:$versionHibernate"

  testCompile "org.grails:grails-datastore-rest-client"
  testCompile "org.grails.plugins:geb"
  testRuntime "org.seleniumhq.selenium:selenium-chrome-driver:3.6.0"
  testRuntime "org.seleniumhq.selenium:selenium-firefox-driver:3.6.0"
  testRuntime "org.seleniumhq.selenium:selenium-remote-driver:3.6.0"
  testRuntime "org.seleniumhq.selenium:selenium-api:3.6.0"
}

bootRun {
  jvmArgs('-Dspring.output.ansi.enabled=always')
  addResources = true
}

//grails {
//  exploded = true
//  plugins {
//    //println "Inside grails: $rootProject.name"
//    compile project(':gorm-tools')
//  }
//}

// Added to be able to see failed tests and the cause in console on test run.
// This really helpful and needed when viewing on Travis CI or others.
//integrationTest {
//  testLogging {
//    exceptionFormat = 'full'
//    events "failed"//, "passed", "skipped", "standardOut", "standardError"
//  }

  // Uncomment line bellow to show in console all tests that were executed in next format:
  //:test-app:integrationTest

  //beforeTest { descriptor -> logger.quiet " -- $descriptor" }
//}

test {
  //testLogging.showStandardStreams = true
  testLogging.exceptionFormat = 'full'
}
