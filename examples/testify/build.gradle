apply plugin:"groovy"
apply plugin:"org.grails.grails-plugin"

dependencies {
  console "org.grails:grails-console"
  profile "org.grails.profiles:rest-api"

  implementation "org.grails:grails-plugin-domain-class"
  implementation "dk.glasius:external-config:$vExternalConfig"

  implementation "org.grails.plugins:view-tools:$vViewTools"

  implementation project(":gorm-tools")
  implementation project(":gorm-tools-security")
  implementation project(":rally-domain")
  // testCompile project(":rally-domain")

  implementation "org.hibernate:hibernate-core:$vHibernate"
  implementation "org.hibernate:hibernate-ehcache:$vHibernate"

  // runtime "org.glassfish.web:el-impl:2.1.2-b03"
  runtimeOnly "javax.xml.bind:jaxb-api:2.3.1"
  runtimeOnly "com.zaxxer:HikariCP:$vHikari"

  testImplementation "io.micronaut:micronaut-inject-groovy"
  testImplementation "org.grails:grails-gorm-testing-support"
  testImplementation "org.mockito:mockito-core"
  testImplementation "io.micronaut:micronaut-http-client"
  testImplementation "org.grails:grails-web-testing-support"
  testImplementation "org.grails:views-json-testing-support"
}

// bootRun {
//   ignoreExitValue true
//   jvmArgs(
//     '-Dspring.output.ansi.enabled=always',
//     '-noverify',
//     '-XX:TieredStopAtLevel=1',
//     '-Xmx1024m')
//   sourceResources sourceSets.main
//   String springProfilesActive = 'spring.profiles.active'
//   systemProperty springProfilesActive, System.getProperty(springProfilesActive)
// }
