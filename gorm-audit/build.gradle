plugins {
  id 'org.springframework.boot'
  id 'io.spring.dependency-management'
  id "yakworks.groovy-lib"
}

apply from: "${rootDir}/gradle/compile.gradle"
apply from: "${rootDir}/gradle/publish.gradle"
apply from: "${rootDir}/gradle/test-unit.gradle"

// apply from: "${rootDir}/gradle/gorm-lib.gradle"
// apply from: "${rootDir}/gradle/test-integration.gradle"

//shared resources to pick up the Gorm defaults from application.groovy, as well as simple logback
// sourceSets.test.resources.srcDirs += [project(':gorm-test-support').sourceSets.main.resources]

dependencies {

  // implementation("org.grails.plugins:spring-security-core:$vSpringSecurity"){
  //   exclude group: 'org.grails', module: 'grails-dependencies'
  //   exclude group: 'org.grails', module: 'grails-web-boot'
  // }
  implementation "org.springframework.boot:spring-boot-autoconfigure"
  implementation "jakarta.annotation:jakarta.annotation-api:$vJakartaAnn"

  compileOnly project(":gorm-tools")
  api project(":security-core")
  // for the org.grails.web.util.WebUtils
  // compileOnly "org.grails:grails-web-common"
  implementation "org.grails:grails-datastore-gorm-hibernate5:$vGormHibernate"
  implementation "org.grails.plugins:hibernate5:$vGormHibernate"
  implementation "org.hibernate:hibernate-core:$vHibernate"
  // compileOnly "org.hibernate:hibernate-ehcache:$vHibernate"

  // tests deps
  testRuntimeOnly "com.h2database:h2:$vH2"
  testRuntimeOnly "com.zaxxer:HikariCP:$vHikari"
  //testRuntimeOnly "javax.xml.bind:jaxb-api:2.3.1"

  testImplementation project(":gorm-test-support") //this might seem circular but it can be added to itself as it dif config

  // testImplementation project(":rally-domain")
}

// configurations.api {
//   exclude group: 'org.grails', module: 'grails-plugin-controllers'
// }
