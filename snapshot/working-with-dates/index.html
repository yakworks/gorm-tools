
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <meta name="description" content="Plugin tools Grails/Gorm - repository data services, json query language, fast data binder">
      
      
        <link rel="canonical" href="https://yakworks.github.io/gorm-tools/snapshot/working-with-dates/">
      
      
        <meta name="author" content="9ci Inc">
      
      
        <link rel="shortcut icon" href="../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-components-1.10.11">
    
    
      
        <title>Date Utils - Gorm Tools Grails Plugin</title>
      
    
    
      
    
    
      <script src="../assets/javascripts/modernizr-e826f8942a.js"></script>
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application-2cd7d9ab0f.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-035c261bc5.palette.css">
      
      <link rel="stylesheet" href="../assets/stylesheets/material-components-web.min.css">
      <link rel="stylesheet" href="../assets/stylesheets/mdc-web.css">
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open Sans:300,300i,400,400i,600,600i,700,700i,800,800i|Ubuntu+Mono">
        <style>body,input{font-family:"Open Sans","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.20/jquery.fancybox.min.css">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.20/jquery.fancybox.min.js"></script>
    
  </head>
  
  
  
  
    <body data-md-color-primary="light-green" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      
        <style>.region--header{background-color:rgba(255,255,255,.9);min-height:3.25rem;width:100%;z-index:2}header.region--header{position:fixed;top:0;right:0;left:0}.region--header .region--header__wrapper{max-width:1440px;margin-left:auto;margin-right:auto;position:relative;z-index:2;box-sizing:inherit}.region--header .region--header__logo{display:inline-block;float:left;height:3.25rem;margin:0;padding-left:1rem}.site-logo{display:block;height:4.25rem;padding:1.5rem 0}.site-logo--main{display:block;height:3.25rem;margin:0;padding:0;width:4.25rem}.header-navigation{font-size:1rem;clear:none;float:right;margin-top:.75rem;padding-bottom:0;padding-right:.75rem}.header-navigation__menu{clear:both;overflow:visible;-webkit-transform-style:preserve-3d;width:100%;z-index:9999;display:inline;margin:0;padding:0}.header-navigation__menu-link{display:inline;line-height:1.5;margin-right:0;padding-right:0;width:auto;overflow:hidden;text-align:right;z-index:2}.region--header a{text-decoration:none}.header-navigation__menu-link a{padding-left:.75rem;padding-right:.75rem;color:#012b45;display:inline-block;font-weight:400;text-transform:uppercase;transition:background-color ease .2s}@media only screen and (max-width:500px){.header-navigation{font-size:.85rem}.header-navigation__menu-link a{padding-left:.25rem;padding-right:.25rem}}.header-navigation__menu-link:last-child:not(.header-navigation__active-nav-item):not(:hover):not(:focus){color:#e8650c}.header-navigation__menu-link a:focus,.header-navigation__menu-link a:hover{color:#e8650c}.md-container{padding-top:6.5rem}#header-docs{top:3.25rem}#background{display:none}#header-docs .md-logo{display:none}</style>
<style media="print">#header-docs{top:0}#header-docs .md-logo{display:block}#header-website{display:none}.md-container{padding-top:0}.headroom--pinned{transform:translateY(0)}#background{position:fixed;top:250px;left:50px;z-index:9999999;background:0 0;min-height:30%;min-width:30%;display:block}#bg-text{color:rgba(211,211,211,.2);font-size:80px;transform:rotate(300deg);-webkit-transform:rotate(300deg)}</style>
<div id="background">
  <p id="bg-text">9ci Confidential</p>
</div>
<header id="header-website" class="region--header" role="banner">
  <div class="region--header__wrapper">
    <a href="/" class="region--header__logo">
      <img src="http://www.9ci.com/assets/img/logo.svg" alt="9ci logo" class="site-logo site-logo--main">
    </a>
    <nav role="navigation" class="header-navigation">
      <ul id="js-navigation-menu" class="header-navigation__menu">
      <li class="header-navigation__menu-link">
        <a href="http://www.9ci.com/solutions">Solutions</a>
      </li>
      <li class="header-navigation__menu-link">
        <a href="http://www.9ci.com/company">Company</a>
      </li>
      <li class="header-navigation__menu-link">
        <a href="http://www.9ci.com/contact">Contact</a>
      </li>
      </ul>
    </nav>
  </div>
</header>
<header id="header-docs" class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink md-flex__cell--vmiddle">
        <a href="https://yakworks.github.io/gorm-tools/snapshot" title="Gorm Tools Grails Plugin" class="md-header-nav__button md-logo">
          
            <img src="../assets/images/logo_white.png" width="36" height="36">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            Gorm Tools Grails Plugin -
            
              
                <span class="md-header-nav__parent">
                  Toolbox
                </span>
              
            
            Date Utils
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="" data-md-lang-tokenizer="[\s\-]+">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/yakworks/gorm-tools" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      yakworks/gorm-tools
    </div>
  </a>

          </div>
        </div>
      
      
    </div>
  </nav>
</header>
      
    
    <div class="md-container">
      
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <div class="md-nav__button md-logo">
      
        <i class="md-icon md-icon--home"></i>
      
    </div>
    Gorm Tools Grails Plugin
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/yakworks/gorm-tools" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      yakworks/gorm-tools
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Repository Pattern
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Repository Pattern
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../repository/intro/" title="Quick Start" class="md-nav__link">
      Quick Start
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../repository/ref/" title="Reference" class="md-nav__link">
      Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../repository/databinding/" title="Databinding" class="md-nav__link">
      Databinding
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../queries-mango/" title="Mango Query" class="md-nav__link">
      Mango Query
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../async/" title="Async" class="md-nav__link">
      Async
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Toolbox
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Toolbox
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../id-generation/" title="Id Generation" class="md-nav__link">
      Id Generation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../gorm-utils/" title="GormUtils Class" class="md-nav__link">
      GormUtils Class
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../beanPathTools/" title="Bean Path Tools" class="md-nav__link">
      Bean Path Tools
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Date Utils
      </label>
    
    <a href="./" title="Date Utils" class="md-nav__link md-nav__link--active">
      Date Utils
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title md-nav__toc" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dateutil" title="DateUtil" class="md-nav__link">
    DateUtil
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parsing-a-date-in-a-string" title="Parsing a date in a string" class="md-nav__link">
    Parsing a date in a string
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#converting-date-instance-to-a-string" title="Converting Date instance to a string" class="md-nav__link">
    Converting Date instance to a string
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-the-difference-now-and-a-specified-date-in-hours" title="Get the difference now and a specified date in hours" class="md-nav__link">
    Get the difference now and a specified date in hours
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-the-difference-between-dates" title="Get the difference between dates" class="md-nav__link">
    Get the difference between dates
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiformatdateconverter" title="MultiFormatDateConverter" class="md-nav__link">
    MultiFormatDateConverter
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dealing-with-timezones-when-storing-dates" title="Dealing with timezones when storing dates." class="md-nav__link">
    Dealing with timezones when storing dates.
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#references-on-this" title="References on this" class="md-nav__link">
    References on this
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../testing/" title="Testing" class="md-nav__link">
      Testing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../api-docs/" title="API Docs" class="md-nav__link">
      API Docs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../usefulLinks/" title="Useful links" class="md-nav__link">
      Useful links
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title md-nav__toc" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dateutil" title="DateUtil" class="md-nav__link">
    DateUtil
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parsing-a-date-in-a-string" title="Parsing a date in a string" class="md-nav__link">
    Parsing a date in a string
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#converting-date-instance-to-a-string" title="Converting Date instance to a string" class="md-nav__link">
    Converting Date instance to a string
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-the-difference-now-and-a-specified-date-in-hours" title="Get the difference now and a specified date in hours" class="md-nav__link">
    Get the difference now and a specified date in hours
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-the-difference-between-dates" title="Get the difference between dates" class="md-nav__link">
    Get the difference between dates
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiformatdateconverter" title="MultiFormatDateConverter" class="md-nav__link">
    MultiFormatDateConverter
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dealing-with-timezones-when-storing-dates" title="Dealing with timezones when storing dates." class="md-nav__link">
    Dealing with timezones when storing dates.
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#references-on-this" title="References on this" class="md-nav__link">
    References on this
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div id="article-content" class="md-content"> 
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/yakworks/gorm-tools/edit/master/docs/working-with-dates.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Date Utils</h1>
                
                
                <p>Gorm-tools provides a set of static utils which allow us to manipulate with dates much easier.</p>
<h2 id="dateutil">DateUtil<a class="headerlink" href="#dateutil" title="Permanent link">&para;</a></h2>
<p>See <a href="https://github.com/yakworks/gorm-tools/blob/master/plugin/src/main/groovy/gorm/tools/beans/DateUtil.groovy">DateUtil</a></p>
<h3 id="parsing-a-date-in-a-string">Parsing a date in a string<a class="headerlink" href="#parsing-a-date-in-a-string" title="Permanent link">&para;</a></h3>
<p><code>stringToDate</code> expects a string with date in the simple format <code>yyyy-MM-dd</code> and returns Date instance:</p>
<div class="codehilite"><pre><span></span>     <span class="n">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="n">DateUtil</span><span class="o">.</span><span class="na">stringToDate</span><span class="o">(</span><span class="s2">&quot;2017-10-19&quot;</span><span class="o">)</span>

     <span class="k">assert</span> <span class="n">date</span>
     <span class="k">assert</span> <span class="n">date</span> <span class="o">==</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s2">&quot;yyyy-MM-dd&quot;</span><span class="o">).</span><span class="na">parse</span><span class="o">(</span><span class="s2">&quot;2017-10-19&quot;</span><span class="o">)</span>
</pre></div>

<p>it's a shortcut for <strong>convertStringToDateTime</strong></p>
<div class="codehilite"><pre><span></span>     <span class="n">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="n">DateUtil</span><span class="o">.</span><span class="na">convertStringToDateTime</span><span class="o">(</span><span class="s2">&quot;2017-10-19&quot;</span><span class="o">,</span> <span class="s2">&quot;yyyy-MM-dd&quot;</span><span class="o">)</span>

     <span class="k">assert</span> <span class="n">date</span>
     <span class="k">assert</span> <span class="n">date</span> <span class="o">==</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s2">&quot;yyyy-MM-dd&quot;</span><span class="o">).</span><span class="na">parse</span><span class="o">(</span><span class="s2">&quot;2017-10-19&quot;</span><span class="o">)</span>
</pre></div>

<h3 id="converting-date-instance-to-a-string">Converting Date instance to a string<a class="headerlink" href="#converting-date-instance-to-a-string" title="Permanent link">&para;</a></h3>
<p><code>dateToJsonString</code> converts a date to the format <code>yyyy-MM-dd'T'HH:mm:ss.SSSZ</code></p>
<div class="codehilite"><pre><span></span>    <span class="n">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s1">&#39;yyyy-MM-dd HH:mm:ss&#39;</span><span class="o">).</span><span class="na">parse</span><span class="o">(</span><span class="s1">&#39;2017-10-20 22:00:00&#39;</span><span class="o">)</span>

    <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">DateUtil</span><span class="o">.</span><span class="na">dateToJsonString</span><span class="o">(</span><span class="n">date</span><span class="o">)</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="n">date</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s2">&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSZ&quot;</span><span class="o">)</span>
</pre></div>

<p>it's a shortcut for <strong>dateToString</strong> method which accepts a format</p>
<div class="codehilite"><pre><span></span>    <span class="n">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s1">&#39;yyyy-MM-dd HH:mm:ss&#39;</span><span class="o">).</span><span class="na">parse</span><span class="o">(</span><span class="s1">&#39;2017-10-20 22:00:00&#39;</span><span class="o">)</span>

    <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">DateUtil</span><span class="o">.</span><span class="na">dateToString</span><span class="o">(</span><span class="n">date</span><span class="o">,</span> <span class="s2">&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSZ&quot;</span><span class="o">)</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="n">date</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s2">&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSZ&quot;</span><span class="o">)</span>


    <span class="n">result</span> <span class="o">=</span> <span class="n">DateUtil</span><span class="o">.</span><span class="na">dateToString</span><span class="o">(</span><span class="n">date</span><span class="o">)</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="n">date</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s2">&quot;MM/dd/yyyy hh:mm:ss&quot;</span><span class="o">)</span>
</pre></div>

<h3 id="get-the-difference-now-and-a-specified-date-in-hours">Get the difference now and a specified date in hours<a class="headerlink" href="#get-the-difference-now-and-a-specified-date-in-hours" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>    <span class="n">Calendar</span> <span class="n">calendar</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">()</span>
    <span class="n">calendar</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">HOUR</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span>
    <span class="n">calendar</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">MINUTE</span><span class="o">,</span> <span class="mi">30</span><span class="o">)</span>

    <span class="k">assert</span> <span class="mi">1L</span> <span class="o">=</span> <span class="n">DateUtil</span><span class="o">.</span><span class="na">getDateDifference_inHours</span><span class="o">(</span><span class="n">calendar</span><span class="o">.</span><span class="na">getTime</span><span class="o">())</span>
</pre></div>

<h3 id="get-the-difference-between-dates">Get the difference between dates<a class="headerlink" href="#get-the-difference-between-dates" title="Permanent link">&para;</a></h3>
<p>We can calculate get number of months between two dates, for example:</p>
<div class="codehilite"><pre><span></span>    <span class="n">SimpleDateFormat</span> <span class="n">format</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s2">&quot;yyyy-MM-dd&quot;</span><span class="o">)</span>
    <span class="n">Date</span> <span class="n">date1</span> <span class="o">=</span> <span class="n">format</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s2">&quot;2017-10-19&quot;</span><span class="o">)</span>
    <span class="n">Date</span> <span class="n">date2</span> <span class="o">=</span> <span class="n">format</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s2">&quot;2017-12-19&quot;</span><span class="o">)</span>

    <span class="mi">2</span> <span class="o">==</span> <span class="n">DateUtil</span><span class="o">.</span><span class="na">getMonthDiff</span><span class="o">(</span><span class="n">date1</span><span class="o">,</span> <span class="n">date2</span><span class="o">)</span>
</pre></div>

<p>or number of days</p>
<div class="codehilite"><pre><span></span>    <span class="n">Date</span> <span class="n">now</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">()</span>

    <span class="k">assert</span> <span class="mi">0</span> <span class="o">==</span> <span class="n">DateUtil</span><span class="o">.</span><span class="na">getDaysBetween</span><span class="o">(</span><span class="n">now</span><span class="o">,</span> <span class="n">now</span><span class="o">)</span>
    <span class="k">assert</span> <span class="o">-</span><span class="mi">10</span> <span class="o">==</span> <span class="n">DateUtil</span><span class="o">.</span><span class="na">getDaysBetween</span><span class="o">(</span><span class="n">now</span> <span class="o">-</span> <span class="mi">10</span><span class="o">,</span> <span class="n">now</span><span class="o">)</span>
    <span class="k">assert</span>  <span class="mi">10</span> <span class="o">==</span> <span class="n">DateUtil</span><span class="o">.</span><span class="na">getDaysBetween</span><span class="o">(</span><span class="n">now</span> <span class="o">+</span> <span class="mi">10</span><span class="o">,</span> <span class="n">now</span><span class="o">)</span>
</pre></div>

<h2 id="multiformatdateconverter">MultiFormatDateConverter<a class="headerlink" href="#multiformatdateconverter" title="Permanent link">&para;</a></h2>
<p>MultiFormatDateConverter extends general type conversion system for dates. It is used to date formatted string to date.</p>
<p>Under the hood it uses DateUtil and supports next formats "yyyy-MM-dd", "yyyy-MM-dd'T'HH:mm:ss.SSSZ", "yyyy-MM-dd'T'HH:mm:ssZ",
"yyyy-MM-dd'T'HH:mm:ss", "MM/dd/yy"</p>
<p>To apply it to application add a spring bean for it. The bean name could be any</p>
<h2 id="dealing-with-timezones-when-storing-dates">Dealing with timezones when storing dates.<a class="headerlink" href="#dealing-with-timezones-when-storing-dates" title="Permanent link">&para;</a></h2>
<p>By default JDBC drivers stores and retrieves the dates/timestamps in local JVM timezone. 
However it is generally recommended to use UTC for storing dates in database. </p>
<p>There are two ways to store the date values in UTC. One is to change the default time zone of JVM using <code>TimeZone.setDefault( TimeZone.getTimeZone( &quot;UTC&quot; ) );</code>
However this forces to change the jvm default time zone which may not be possible in all cases.</p>
<p>Another option is to use the hibernate setting <code>hibernamte.jdbc.time_zone</code></p>
<p>With grails, the timezone which hibernate uses can be configured in <code>application.yml</code> as shown below.</p>
<div class="codehilite"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">hibernate</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">jdbc</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">time_zone</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">UTC</span>
</pre></div>

<p>This will instruct hibernate to store and retrieve the dates in UTC timezone.</p>
<p>However it should be noted that if you query the date values with JDBC it will be retrieved in JVM timezone and not UTC and will need to be converted to UTC manually or use the overloaded version of ResultSet.getTimeStamp that takes calendar as second argument
Eg. <code>ResultSet#getTimestamp(int columnIndex, Calendar cal)</code></p>
<h3 id="references-on-this">References on this<a class="headerlink" href="#references-on-this" title="Permanent link">&para;</a></h3>
<p><a href="http://in.relation.to/2016/09/12/jdbc-time-zone-configuration-property/">http://in.relation.to/2016/09/12/jdbc-time-zone-configuration-property/</a>
<a href="https://hibernate.atlassian.net/browse/HHH-11396">https://hibernate.atlassian.net/browse/HHH-11396</a>
<a href="https://vladmihalcea.com/2017/03/14/how-to-store-date-time-and-timestamps-in-utc-time-zone-with-jdbc-and-hibernate/">https://vladmihalcea.com/2017/03/14/how-to-store-date-time-and-timestamps-in-utc-time-zone-with-jdbc-and-hibernate/</a>
<a href="https://stackoverflow.com/questions/31965179/whats-new-in-hibernate-orm-5">https://stackoverflow.com/questions/31965179/whats-new-in-hibernate-orm-5</a></p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../beanPathTools/" title="Bean Path Tools" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Bean Path Tools
              </span>
            </div>
          </a>
        
        
          <a href="../testing/" title="Testing" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Testing
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017 9ci Inc
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://yakworks.github.io/mkdocs-material-components/" title="Material Components for MkDocs">
          Material Components for MkDocs</a>
      </div>
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application-68832431b5.js"></script>
      
      
      <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
      <script>window.mdc.autoInit()</script>
      <script src="../assets/javascripts/headroom.min.js"></script>
      <script src="../assets/javascripts/jQuery.headroom.min.js"></script>
      <script src="../assets/javascripts/jq-mdc-web.js"></script>
      <script src="https://cdn.jsdelivr.net/jquery.loadingoverlay/latest/loadingoverlay.min.js"></script>
      <script>app.initialize({version:"0.16.3",url:{base:".."}})</script>
      
    
    
  </body>
</html>